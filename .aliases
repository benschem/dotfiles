# Note to self: only add aliases you actually use
alias aliases='command -v bat >/dev/null && bat --language=sh ~/.aliases --style=plain --paging=never || (cat ~/.aliases; echo ""; echo "# [INFO] bat not found. Run: brew install bat for syntax highlighting")'

# Git aliases (replace OMZ's git plugin)
alias gs='git status -sb' # Small status with symbols
alias gst='git status'
alias gpl='git pull'
alias gp='git push'
alias gpf='git push --force-with-lease'
alias gri='git rebase -i'

## Git branching
alias gco='git switch'          # more modern git checkout
alias gcb='git switch --create' # more modern git checkout --branch

## Git diffing
alias gd='git --no-pager diff --word-diff=color'
alias gdt='git difftool'
alias gstat='git --no-pager diff --stat'
alias ghist='git log --follow --' # view full history of a single file (usage: ghist path/to/file)

## Git committing
alias ga='git add'
alias gap='git add --patch'
alias gc='git commit'
alias gcm='git commit --message'
alias gca='git commit --amend && (git rev-parse --abbrev-ref --symbolic-full-name @{u} >/dev/null 2>&1 && [[ $(git rev-list --count @{u}..HEAD) -eq 0 ]] && echo "[INFO] It was not safe to amend - this commit has already been pushed. Pushing now will rewrite history. Undo and make a new commit or if you must push run: \"git push --force-with-lease\"" || echo "[INFO] It was safe to amend - this commit has not been pushed yet (or no upstream is set)")'
alias gcan='git commit --amend --no-edit && (git rev-parse --abbrev-ref --symbolic-full-name @{u} >/dev/null 2>&1 && [[ $(git rev-list --count @{u}..HEAD) -eq 0 ]] && echo "[INFO] It was not safe to amend - this commit has already been pushed. Pushing now will rewrite history. Undo and make a new commit or if you must push run: \"git push --force-with-lease\"" || echo "[INFO] It was safe to amend - this commit has not been pushed yet (or no upstream is set)")'
alias grs='git restore --staged'
alias guc='git uncommit'      # alias for reset --soft HEAD~1
alias grvt='git revert HEAD'  # create a new commit that undoes the changes made by the last commit

## Git logging
alias glo='git log --oneline --decorate'
alias glog='git log --oneline --decorate --graph'
alias gloga='git log --graph --pretty=format:"%Cred%h%Creset - %s %Cgreen(%cr) %C(bold blue)%an%Creset %C(yellow)%d%Creset"' # http://www.jukie.net/bart/blog/pimping-out-git-log

# Shell aliases (replace OMZ's common-aliases plugin)
alias ls='ls -AFG'             # list all files, trailing slashes, color
alias la='ls -AlhFG'           # list all files, long format, human-readable file sizes, trailing slashes, color
alias ldot='ls -ldG .*'        # list metadata for dotfiles/directories only (not contents)
alias grep='grep --color'      # highlight matching text in grep output
alias help='man'               # use 'help' to open manual pages
alias tree='tree -a -C -d --sort=name --dirsfirst -L'
alias reload='source ~/.zshrc'

# Networking
alias lt='localtunnel'                     # expose a local port to the internet
alias myip='curl https://ipinfo.io/json'   # public IP info (use /ip for raw IP only)
alias serve='ruby -run -e httpd . -p 8000' # static file server from current directory
alias ports='lsof -i -P -n | grep LISTEN'  # show listening TCP ports with numeric IPs/ports
alias sniff='sudo lsof -i -P -n'           # show all active network sockets (requires sudo)

# Clarity project manager aliases
alias urgent='clarity list --filter urgency=high --filter urgency=medium --filter urgency=low --sort urgency'
